tasks.register('copyMockMethodDispatcher', Copy) {
    dependsOn compileJava

    from "${sourceSets.main.java.classesDirectory.get()}/org/mockito/internal/creation/bytebuddy/inject/MockMethodDispatcher.class"
    into layout.buildDirectory.dir("generated/raw/org/mockito/internal/creation/bytebuddy/inject")

    rename '(.+)\\.class', '$1.raw'
}
classes.dependsOn(copyMockMethodDispatcher)

jar {
    exclude("org/mockito/internal/creation/bytebuddy/inject/package-info.class")
    exclude("org/mockito/internal/creation/bytebuddy/inject/MockMethodDispatcher.class")

    from(layout.buildDirectory.dir("generated/raw"))
}
